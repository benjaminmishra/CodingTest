syntax = "proto3";

option csharp_namespace = "Library.Reporting.Types.Protos";

package reporting;

enum ReportTypes {
    MostBorrowedBooks = 0;
}

service ReportingService {
    rpc GetReport (GetReportRequest) returns (GetReportResponse);
}

message GetReportRequest {
    ReportTypes report_type = 1;
    oneof data {
        MostBorrowedBooksRequest most_borrowed_books_request = 2;
    }
}

message GetReportResponse {
    oneof data {
        MostBorrowedBooksResponse most_borrowed_books_reponse = 1;
    }
    optional Error error = 2;
}

message MostBorrowedBooksRequest {
    int32 count = 1;
}

message MostBorrowedBooksResponse {
    repeated MostBorrowedBook MostBorrowedBooks = 1;
}

message MostBorrowedBook {
    string Title = 1;
    string ISBN = 2;
    string Author = 3;
    int32 CopiesBorrowed = 4;
}

message Error {
    optional string message = 1;
    optional Error inner_error = 2;
}
